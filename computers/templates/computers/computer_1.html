{% extends 'computers\base.html' %}
{% block title %}电脑{% endblock %}
{% load com %}
{% block body_block %}
    <div class="row">
        <div class="page-header"><h1 align="center">电脑分布图</h1></div>
    </div>
    <div class="row">
        <!--com33-38-->
        <div class="col-md-1 col-md-offset-1">
            {% get_com 33 %}
        </div>
        <div class="col-md-1">
             {% get_com 34 %}
        </div>
        <div class="col-md-1">
             {% get_com 36 %}
        </div>
        <div class="col-md-1 col-md-offset-1">
             {% get_com 37 %}
        </div>
        <div class="col-md-1">
             {% get_com 38 %}
        </div>
    </div>
    <div class="row">
        <div class="col-md-3 col-md-offset-1">
            <hr><h3 align="center"><strong>策略部</strong></h3>
        </div>
        <div class="col-md-4 col-md-offset-1">
            <h3 align="center"><strong>前台</strong></h3><hr>
        </div>
    </div>
    <div class="row">
        <!--com39-41-->
        <div class="col-md-1 col-md-offset-1">
            {% get_com 31 %}
        </div>
        <div class="col-md-1">
            {% get_com 32 %}
        </div>
        <div class="col-md-1">
            {% get_com 35 %}
        </div>
        <div class="col-md-1 col-md-offset-1">
         {# 服务器旁边的位置#{% get_com 42 %}#}
        </div>

        <div class="col-md-1">
            {% get_com 41 %}
        </div>
        <div class="col-md-1">
            {% get_com 40 %}
        </div>
        <div class="col-md-1">
            {% get_com 39 %}
        </div>

    </div>

    <br><br><br><br>

    <div class="row">
        <!--com25-28-->
        <div class="col-md-1 col-md-offset-1">
           {% get_com 30 %}
        </div>
        <div class="col-md-1 col-md-offset-3">
            {% get_com 28 %}
        </div>
        
        <div class="col-md-1">
            {% get_com 27 %}
        </div>

        <div class="col-md-1">
            {% get_com 26 %}
        </div>
        <div class="col-md-1">
            {% get_com 25 %}
        </div>

    </div>

    <div class="row">
        <div class="col-md-1 col-md-offset-1">
            <hr><h3 align="center"><strong>人事部</strong></h3>
        </div>
        <div class="col-md-1 col-md-offset-2">
            {% get_com 54 %}
        </div>
        <div class="col-md-4">
            <hr><h3 align="center"><strong>麦吉农场</strong></h3>
        </div>
        <div class="col-md-1">
            {% get_com 24 %}
        </div>
    </div>
    <div class="row">
        <!--com20-23-->
        <div class="col-md-1 col-md-offset-1">
            {% get_com 29 %}
        </div>

        <div class="col-md-1 col-md-offset-3">
            {% get_com 20 %}
        </div>
        <div class="col-md-1">
            {% get_com 21 %}
        </div>
        <div class="col-md-1">
            {% get_com 22 %}
        </div>
        <div class="col-md-1">
            {% get_com 23 %}
        </div>

    </div>

    <br><br><br><br>
    
    <div class="row">
        <!--com16-19-->
        <div class="col-md-1 col-md-offset-5">
            {% get_com 19 %}
        </div>
        <div class="col-md-1">
            {% get_com 18 %}
        </div>
        <div class="col-md-1">
            {% get_com 17 %}
        </div>
        <div class="col-md-1">
            {% get_com 16 %}
        </div>

    </div>

    <div class="row">
        <div class="col-md-1 col-md-offset-1">
            {% get_com 52 %}
        </div>
        <div class="col-md-1 col-md-offset-2">
           {% get_com 11 %}
        </div>
        <div class="col-md-4">
            <hr><h3 align="center"><strong>客户部</strong></h3>
        </div>
        <div class="col-md-1">
            {% get_com 50 %}
        </div>
         
    </div>
    <div class="row">
        <!--com12-15-->
        <div class="col-md-1 col-md-offset-5">
            {% get_com 12 %}
        </div>
        <div class="col-md-1">
            {% get_com 13 %}
        </div>
        <div class="col-md-1">
            {% get_com 14 %}
        </div>
        <div class="col-md-1">
            {% get_com 15 %}
        </div>

    </div>

    <br><br><br><br>

    <div class="row">
        <!--com5-8-->
        <div class="col-md-1 col-md-offset-1">
            {% get_com 10 %}
        </div>
        <div class="col-md-1 col-md-offset-3">
            {% get_com 8 %}
        </div>
        
        <div class="col-md-1">
            {% get_com 7 %}
        </div>

        <div class="col-md-1">
            {% get_com 6 %}
        </div>
        <div class="col-md-1">
            {% get_com 5 %}
        </div>

    </div>

    <div class="row">
        <div class="col-md-1 col-md-offset-1">
            <hr><h3 align="center"><strong>财务部</strong></h3>
        </div>
        <div class="col-md-1 col-md-offset-2">
            {% get_com 51 %}
        </div>
        <div class="col-md-4">
            <hr><h3 align="center"><strong>创意部</strong></h3>
        </div>
        <div class="col-md-1">
            {% get_com 53 %}
        </div>
    </div>
    <div class="row">
        <!--com1-4-->
        <div class="col-md-1 col-md-offset-1">
            {% get_com 9 %}
        </div>
        <div class="col-md-1 col-md-offset-3">
            {% get_com 1 %}
        </div>
        <div class="col-md-1">
            {% get_com 2 %}
        </div>
        <div class="col-md-1">
            {% get_com 3 %}
        </div>
        <div class="col-md-1">
            {% get_com 4 %}
        </div>

    </div>

<div class="modal" id="comInfo">
    <div class="modal-dialog" style="width : 400px">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title"><strong>更改电脑详情</strong></h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" id="myform" method="post">
                    <fieldset>
                        <div class="form-group" id="posDiv">
                            <label class="col-md-3 control-label" for="compos">位置：</label>
                            <div class="col-md-5">
                               <span class="form-control" id="compos"></span>
                            </div>
                        </div>
                        <div class="form-group" id="idDiv">
                            <label class="col-md-3 control-label" for="comid">编号：</label>
                            <div class="col-md-5">
                                <input type="text" id="comid" name="comid" class="form-control" placeholder="请输入……"></input>
                            </div>
                        </div>
                        <div class="form-group" id="userDiv">
                            <label class="col-md-3 control-label" for="comuser">使用者：</label>
                            <div class="col-md-5">
                                <input type="text" id="comuser" name="comuser" class="form-control" placeholder="请输入……"></input>
                            </div>
                        </div>
                        <div class="col-md-5 col-md-offset-2" class="checkbox" id="occupiedDiv">
                            <label>
                                <input type="checkbox" id="comoccupied" name="comoccupied">&nbsp&nbsp&nbsp&nbsp是否在用
                            </label>
                        </div>
                    </fieldset>
                </form>
            </div>
            <div class="modal-footer">
                <button id="confirm" type="button" class="btn btn-success btn-sm" data-dismiss="modal">确认</button>
                <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">取消</button>
            </div>
        </div>
    </div>
</div>

<div class="alert alert-success" id="alertDiv" style="display: none;">
    <button class="close">&times;</button>
    <span id="alertText"></span>
</div>


<script type="text/javascript">
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie != '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) == (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    var csrftoken = getCookie('csrftoken');
    $("#confirm").on("click",function() {
        var pos= $("#compos").text();
        var name = $("#comid").val();
        var user = $("#comuser").val();
        var occupied = document.getElementById("comoccupied").checked;
        $.post('{% url 'modify' %}', {com_pos: pos, com_name: name, com_user:user, com_occupied:occupied},function(ret){
            $("#name"+pos).text(name);
            $("#user"+pos).text(user);
            if (occupied){
                document.getElementById("panel"+pos).setAttribute("class","panel panel-info");
            }
            else {
                document.getElementById("panel"+pos).setAttribute("class","panel panel-default");
            }
            })
    })

</script>
    
{% endblock %}